<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="/ProjectManagementSystem/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/ProjectManagementSystem/bootstrap/css/bootstrap-datetimepicker.min.css">
    <link rel="stylesheet" type="text/css" href="/ProjectManagementSystem/login/font-awesome-4.7.0/css/font-awesome.min.css">
<style>
    body{
        opacity: 0;
        animation: page-fade-in 1s forwards;
    }
    @keyframes page-fade-in {
        0% {
            opacity: 0
        }

        100% {
            opacity: 1
        }
    }
    .row{
        margin: 0;
        margin-top: 1%;
    }
    .card-img-top{
        width: 100px;
    }
    img{
        margin: 0 auto;
    }
    p{
        margin: 0;
        padding-top: 0.2em;
        padding-bottom: 0.3em;
    }
    .form-check-input {
        background-color: rgba(255,255,255,.25);
    }
    .form-check-input {
        margin-left:5px;
        width: 1rem;
        height: 1rem;
        margin-top: 0.3rem;
        vertical-align: top;
        background-color: #fff;
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
        border: 2px solid #b4b7c9;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        -webkit-print-color-adjust: exact;
        color-adjust: exact;
    }
    .form-check-input {
        height: 18px;
        margin-top: revert;
        border: unset;
        background-color: #b4b7c9;
        filter: none;
    }
    .form-check-input {
        width: 2.875em;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e");
        background-position: left center;
        border-radius: 2.875em;
        transition: background-position .15s ease-in-out;
    }
    .form-check-input:checked {
        background-color: #22c55e;
        box-shadow: 0 0.5rem 1.125rem -0.5rem rgb(34 197 94 / 90%);
    }
    .form-check-input:checked {
        background-position: right center;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e")
    }
    .col-md-3{
        padding-right: 15px;
        padding-left: 5px;
    }
    .card-body{
        padding: 0;
    }
    .form-check-input{
        width: 50%;
    }
    .flex-center {
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        justify-content: center;
    }
    .overlay-icon {
        position: absolute;
        width: 100%;
        top:0;
        height: 10%;
        bottom: 0;
        opacity: 0;
        -webkit-transition: all .2s ease-in-out;
        -o-transition: all .2s ease-in-out;
        transition: all .2s ease-in-out;
        cursor: pointer;
        background-color: #607d8b78;
    }
    .card-title{
        margin-bottom: 0.2rem;
        margin-top: 0.2rem;
    }
    #user1:hover .overlay-icon {
        opacity: 1;
    }
    .card-body{
        padding: 5px;
    }
    .foot_item{
        text-align: end;
        color: #000;
        padding-right: 12px;
    }
    .foot_item a{
        color: #3a3c3f7d;
        font-size: 12px;
    }
    .col-md-4{
        max-width: 32.333333%;
    }
</style>
</head>
<body>
<div class="row justify-content-between users">
    <!--<div class="card col-md-3" style="padding: 0px;" id="user1">
        <img src="/ProjectManagementSystem/img/Multiavatar-9b858947b263cca4da.png" class="card-img-top" alt="...">
        <div class="card-body">
            <h5 class="card-title" style="text-align: center">
                <p>赵昭</p>
            </h5>
            <div class="card-text row permissions">
                <h5 class="col-md-12">项目</h5>
                <div class="col-md-3">
                    <label style="font-size: 16px;">增</label>
                    <input type="checkbox" id="insert_project" class="form-check-input flex-shrink-0" checked="checked" >
                </div>
                <div class="col-md-3">
                    <label style="font-size: 16px;">删</label>
                    <input  type="checkbox" id="delete_project" class="form-check-input flex-shrink-0">
                </div>
                <div class="col-md-3">
                    <label style="font-size: 16px;">改</label>
                    <input  type="checkbox" id="update_project" class="form-check-input flex-shrink-0" checked="checked">
                </div>
                <div class="col-md-3">
                    <label style="font-size: 16px;">查</label>
                    <input  type="checkbox" id="select_project" class="form-check-input flex-shrink-0" checked="checked">
                </div>
            </div>
        </div>
        <label class="mb-0 overlay-icon d-flex flex-center">
            <span class="bg-holder overlay overlay-0"></span>
            <span class="z-index-1 text-white dark__text-white text-center fs&#45;&#45;1">
                        <i class="fa fa-cogs"></i>
                        <span class="d-block">修改字段权限</span>
                    </span>
        </label>
        <nav class="foot_item">
            <div class="w-100">
                <span class="fs-sm text-muted me-md-3"><a class="nav-link-style" href="#">www.809927124@qq.com</a></span>
            </div>
        </nav>
    </div>-->
</div>
<script src="/ProjectManagementSystem/js/jquery.js"></script>
<script src="/ProjectManagementSystem/js/jquery.md5.js"></script>
<script src="/ProjectManagementSystem/bootstrap/js/bootstrap-datetimepicker.min.js"></script>
<script src="/ProjectManagementSystem/bootstrap/js/bootstrap-datetimepicker.fr.js"></script>
<script src="/ProjectManagementSystem/bootstrap/js/pophover.min.js"></script>
<script src="/ProjectManagementSystem/bootstrap/js/bootstrap.min.js"></script>
<script src="/ProjectManagementSystem/bootstrap/js/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="/ProjectManagementSystem/bootstrap/js/moment-with-locales.js"></script>
<script>
    $.ajax({
        type:'post',
        url:'../user_controller/select_users_permissions',
        dataType:'json',
        success:function(data){
            let users_html=""
            for(let i=0;i<data.selectUsers.length;i++){
                let permissions_html=""
                for(let j=0;j<data.selectUsersPermissions.length;j++){
                    if(data.selectUsers[i].permission==data.selectUsersPermissions[j].permission){
                        let insert_checked=""
                        let delete_checked=""
                        let update_checked=""
                        let select_checked=""
                        let insert_checked_color= "color: #7c7a7ab3;"
                        let delete_checked_color= "color: #7c7a7ab3;"
                        let update_checked_color= "color: #7c7a7ab3;"
                        let select_checked_color= "color: #7c7a7ab3;"
                        if(data.selectUsersPermissions[j].permission_CRUD.permission_insert==1){
                            insert_checked_color=""
                            insert_checked="checked"
                        }
                        if(data.selectUsersPermissions[j].permission_CRUD.permission_delete==1){
                            delete_checked_color=""
                            delete_checked="checked"
                        }
                        if(data.selectUsersPermissions[j].permission_CRUD.permission_update==1){
                            update_checked_color=""
                            update_checked="checked"
                        }
                        if(data.selectUsersPermissions[j].permission_CRUD.permission_select==1){
                            select_checked_color=""
                            select_checked="checked"
                        }
                        permissions_html+='<h5 class="col-md-12" style="color: #2873c0;">'+data.selectUsersPermissions[j].permission_CRUD.pointListing_list.t_name_chinese+'</h5>\n' +
                            '                <div class="col-md-3">\n' +
                            '                    <label style="font-size: 16px;'+insert_checked_color+'">增</label>\n' +
                            '                    <input type="checkbox" id="insert_'+data.selectUsersPermissions[j].permission_CRUD.pointListing_list.t_name+data.selectUsersPermissions[j].cum_personnel.pid+'" class="form-check-input flex-shrink-0"'+insert_checked+'>\n' +
                            '                </div>\n' +
                            '                <div class="col-md-3">\n' +
                            '                    <label style="font-size: 16px;'+delete_checked_color+'">删</label>\n' +
                            '                    <input  type="checkbox" id="delete_'+data.selectUsersPermissions[j].permission_CRUD.pointListing_list.t_name+data.selectUsersPermissions[j].cum_personnel.pid+'" class="form-check-input flex-shrink-0"'+delete_checked+'>\n' +
                            '                </div>\n' +
                            '                <div class="col-md-3">\n' +
                            '                    <label style="font-size: 16px;'+update_checked_color+'">改</label>\n' +
                            '                    <input  type="checkbox" id="update_'+data.selectUsersPermissions[j].permission_CRUD.pointListing_list.t_name+data.selectUsersPermissions[j].cum_personnel.pid+'" class="form-check-input flex-shrink-0"'+update_checked+'>\n' +
                            '                </div>\n' +
                            '                <div class="col-md-3">\n' +
                            '                    <label style="font-size: 16px;'+select_checked_color+'">查</label>\n' +
                            '                    <input  type="checkbox" id="select_'+data.selectUsersPermissions[j].permission_CRUD.pointListing_list.t_name+data.selectUsersPermissions[j].cum_personnel.pid+'" class="form-check-input flex-shrink-0" '+select_checked+'>\n' +
                            '                </div>'
                    }
                }


                users_html+='<div class="card col-md-4" style="padding: 0px;margin-bottom: 1%;" id="user1">\n' +
                    '        <img src="/headportrait/'+data.selectUsers[i].cum_personnel.personnel_head_portrait+'" class="card-img-top" alt="...">\n' +
                    '        <div class="card-body">\n' +
                    '            <h5 class="card-title" style="text-align: center">\n' +
                    '                <p>'+data.selectUsers[i].cum_personnel.personnel_name+'</p>\n' +
                    '            </h5>\n' +
                    '            <div class="card-text row permissions">\n'+
                    permissions_html+
                    '            </div>\n' +
                    '        </div>\n' +
                    '        <label class="mb-0 overlay-icon d-flex flex-center">\n' +
                    '            <span class="bg-holder overlay overlay-0"></span>\n' +
                    '            <span class="z-index-1 text-white dark__text-white text-center fs--1">\n' +
                    '                        <i class="fa fa-cogs"></i>\n' +
                    '                        <span class="d-block">修改字段权限</span>\n' +
                    '                    </span>\n' +
                    '        </label>\n' +
                    '        <nav class="foot_item">\n' +
                    '            <div class="w-100">\n' +
                    '                <span class="fs-sm text-muted me-md-3"><a class="nav-link-style" href="#">'+data.selectUsers[i].cum_personnel.personnel_email+'</a></span>\n' +
                    '            </div>\n' +
                    '        </nav>\n' +
                    '    </div>'
            }
            $('.users').append(users_html);
        }
    });
</script>
</body>
</html>